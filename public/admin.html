<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ScamCheck ‚Ä¢ Qu·∫£n tr·ªã</title>
  <link rel="stylesheet" href="./css/responsive.css" />
  <link rel="stylesheet" href="./css/app.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
</head>
<body>
  <div class="page">
    <div class="container">
      <div class="topbar">
        <div class="brand">
          <div class="logo"></div>
          <div class="brand-title">
            <b>ScamCheck</b>
            <span>Qu·∫£n tr·ªã</span>
          </div>
        </div>
        <div class="nav-actions">
          <a class="btn secondary" href="./select.html">
            <span class="material-symbols-outlined">arrow_back</span>Quay l·∫°i
          </a>
        </div>
      </div>

      <!-- Menu ƒë·∫ßu trang -->
      <div class="card" style="margin-bottom:14px;">
        <div class="card-body">
          <div class="row" style="justify-content:space-between; gap:10px; flex-wrap:wrap;">
            <div class="row" style="gap:10px; flex-wrap:wrap;">
              <button class="btn secondary" type="button" data-tab="users">
                <span class="material-symbols-outlined">group</span>Ng∆∞·ªùi d√πng
              </button>
              <button class="btn secondary" type="button" data-tab="reports">
                <span class="material-symbols-outlined">assignment</span>B√°o c√°o
              </button>
              <button class="btn secondary" type="button" data-tab="list">
                <span class="material-symbols-outlined">warning</span>Danh s√°ch
              </button>
              <button class="btn secondary" type="button" data-tab="stats">
                <span class="material-symbols-outlined">monitoring</span>Th·ªëng k√™
              </button>
            </div>

            <button class="btn secondary" type="button" id="btnReloadAll">
              <span class="material-symbols-outlined">refresh</span>T·∫£i l·∫°i
            </button>
          </div>

          <div id="notice" class="notice" style="display:none; margin-top:12px;"></div>
        </div>
      </div>

      <!-- USERS -->
      <div id="tab-users" class="card">
        <div class="card-body">
          <div class="spread">
            <div>
              <h2>Ng∆∞·ªùi d√πng</h2>
              <p>Xem v√† c·∫≠p nh·∫≠t th√¥ng tin ng∆∞·ªùi d√πng.</p>
            </div>
            <button class="btn secondary" type="button" id="reloadUsers">
              <span class="material-symbols-outlined">refresh</span>T·∫£i l·∫°i
            </button>
          </div>

          <div class="table-wrap" style="margin-top:12px;">
            <table class="responsive-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>T√™n ƒëƒÉng nh·∫≠p</th>
                  <th>H·ªç v√† t√™n</th>
                  <th>Email</th>
                  <th>S·ªë ƒëi·ªán tho·∫°i</th>
                  <th>Quy·ªÅn</th>
                  <th>L∆∞u</th>
                </tr>
              </thead>
              <tbody id="usersTbody">
                <tr><td colspan="7" style="color:var(--muted);">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- REPORTS -->
      <div id="tab-reports" class="card" style="display:none;">
        <div class="card-body">
          <div class="spread">
            <div>
              <h2>B√°o c√°o</h2>
              <p>Duy·ªát b√°o c√°o ƒë·ªÉ c·∫≠p nh·∫≠t k·∫øt qu·∫£.</p>
            </div>
            <button class="btn secondary" type="button" id="reloadReports">
              <span class="material-symbols-outlined">refresh</span>T·∫£i l·∫°i
            </button>
          </div>

          <div class="table-wrap" style="margin-top:12px;">
            <table class="responsive-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Lo·∫°i</th>
                  <th>N·ªôi dung</th>
                  <th>M√¥ t·∫£</th>
                  <th>Tr·∫°ng th√°i</th>
                  <th>C·∫≠p nh·∫≠t</th>
                </tr>
              </thead>
              <tbody id="reportsTbody">
                <tr><td colspan="6" style="color:var(--muted);">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- LIST -->
      <div id="tab-list" class="card" style="display:none;">
        <div class="card-body">
          <div class="spread">
            <div>
              <h2>Danh s√°ch hi·ªán c√≥</h2>
              <p>B·∫•m ‚ÄúTh√™m c·∫£nh b√°o‚Äù ho·∫∑c ‚ÄúL·ªçc‚Äù. Khi m·ªü 1 m·ª•c, giao di·ªán s·∫Ω t·ª± gi√£n full.</p>
            </div>
            <button class="btn secondary" type="button" id="reloadList">
              <span class="material-symbols-outlined">refresh</span>T·∫£i l·∫°i
            </button>
          </div>

          <!-- n√∫t ƒëi·ªÅu khi·ªÉn -->
          <div class="row" style="margin-top:10px; gap:10px; flex-wrap:wrap;">
            <button class="btn secondary" type="button" id="btnShowAdd">
              <span class="material-symbols-outlined">add</span>Th√™m c·∫£nh b√°o
            </button>
            <button class="btn secondary" type="button" id="btnShowFilter">
              <span class="material-symbols-outlined">tune</span>L·ªçc
            </button>
            <button class="btn secondary" type="button" id="btnShowBoth">
              <span class="material-symbols-outlined">view_column</span>Xem c·∫£ hai
            </button>
          </div>

          <!-- ‚úÖ Grid auto full -->
          <div id="listGrid" class="full-grid" style="margin-top:12px;">
            <!-- Panel Add -->
            <div id="panelAdd" class="card panel-card" style="background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.12);">
              <div class="card-body">
                <h2 style="margin-bottom:6px;">Th√™m c·∫£nh b√°o ngay</h2>
                <p>Th√™m m·ª•c l·ª´a ƒë·∫£o (kh√¥ng c·∫ßn ch·ªù duy·ªát).</p>

                <form id="addForm" style="margin-top:10px;">
                  <div class="field">
                    <div class="label">Lo·∫°i</div>
                    <select id="addType">
                      <option value="phone">S·ªë ƒëi·ªán tho·∫°i</option>
                      <option value="link">ƒê∆∞·ªùng link</option>
                    </select>
                  </div>

                  <div class="field">
                    <div class="label">N·ªôi dung</div>
                    <input id="addValue" type="text" placeholder="Nh·∫≠p s·ªë / link..." required />
                  </div>

                  <div class="field">
                    <div class="label">Ghi ch√∫ (tu·ª≥ ch·ªçn)</div>
                    <input id="addDesc" type="text" placeholder="V√≠ d·ª•: gi·∫£ danh ng√¢n h√†ng..." />
                  </div>

                  <button class="btn full" type="submit" id="btnAdd">
                    <span class="material-symbols-outlined">add</span>Th√™m
                  </button>
                </form>

                <div id="addNotice" class="notice" style="display:none; margin-top:12px;"></div>
              </div>
            </div>

            <!-- Panel Filter/List -->
            <div id="panelFilter" class="card panel-card" style="background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.12);">
              <div class="card-body">
                <div class="spread">
                  <div>
                    <h2 style="margin-bottom:6px;">L·ªçc & t√¨m ki·∫øm</h2>
                    <p style="margin:0;">T√¨m theo n·ªôi dung ho·∫∑c ghi ch√∫. C√≥ ph√¢n lo·∫°i ch·ªù duy·ªát/ƒë√£ duy·ªát.</p>
                  </div>
                </div>

                <div class="row" style="margin-top:10px; flex-wrap:wrap;">
                  <select id="filterType" style="min-width: 190px;">
                    <option value="all">T·∫•t c·∫£</option>
                    <option value="phone">S·ªë ƒëi·ªán tho·∫°i</option>
                    <option value="link">ƒê∆∞·ªùng link</option>
                  </select>

                  <select id="filterStatus" style="min-width: 190px;">
                    <option value="all">T·∫•t c·∫£</option>
                    <option value="pending">Ch·ªù duy·ªát</option>
                    <option value="approved">ƒê√£ duy·ªát</option>
                  </select>

                  <select id="sort" style="min-width: 160px;">
                    <option value="new">M·ªõi nh·∫•t</option>
                    <option value="old">C≈© nh·∫•t</option>
                  </select>
                </div>

                <div class="row" style="margin-top:10px; gap:10px; flex-wrap:wrap;">
                  <input id="q" type="text" placeholder="T√¨m theo n·ªôi dung ho·∫∑c ghi ch√∫..." style="flex:1; min-width:240px;" />
                  <button class="btn secondary" type="button" id="searchBtn">
                    <span class="material-symbols-outlined">search</span>T√¨m
                  </button>
                </div>

                <div class="table-wrap" style="margin-top:12px;">
                  <table class="responsive-table">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>Lo·∫°i</th>
                        <th>N·ªôi dung</th>
                        <th>Ghi ch√∫</th>
                        <th>Tr·∫°ng th√°i</th>
                        <th>Th·ªùi gian</th>
                        <th>X√≥a</th>
                      </tr>
                    </thead>
                    <tbody id="listTbody">
                      <tr><td colspan="7" style="color:var(--muted);">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>
                    </tbody>
                  </table>
                </div>

                <div class="row" style="margin-top:10px; gap:10px; flex-wrap:wrap;">
                  <button class="btn secondary" type="button" id="prevPage">
                    <span class="material-symbols-outlined">chevron_left</span>Trang tr∆∞·ªõc
                  </button>
                  <span class="badge" id="pageInfo">Trang 1</span>
                  <button class="btn secondary" type="button" id="nextPage">
                    Trang sau<span class="material-symbols-outlined">chevron_right</span>
                  </button>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- STATS -->
      <div id="tab-stats" class="card" style="display:none;">
        <div class="card-body">
          <div class="spread">
            <div>
              <h2>Th·ªëng k√™</h2>
              <p>Ch·ªâ hi·ªÉn th·ªã s·ªë l∆∞·ª£ng c·∫£nh b√°o ƒë√£ x√°c nh·∫≠n.</p>
            </div>
            <button class="btn secondary" type="button" id="reloadStats">
              <span class="material-symbols-outlined">refresh</span>T·∫£i l·∫°i
            </button>
          </div>

          <div class="grid cols-2" style="margin-top:12px;">
            <div class="card" style="background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.12);">
              <div class="card-body">
                <div class="badge">üìû S·ªë ƒëi·ªán tho·∫°i</div>
                <h1 id="cPhone" style="margin-top:10px;">0</h1>
              </div>
            </div>

            <div class="card" style="background: rgba(255,255,255,.04); border-color: rgba(255,255,255,.12);">
              <div class="card-body">
                <div class="badge">üîó ƒê∆∞·ªùng link</div>
                <h1 id="cLink" style="margin-top:10px;">0</h1>
              </div>
            </div>
          </div>

        </div>
      </div>

    </div>
  </div>

  <script type="module">
    import { apiFetch, requireAuth, requireAdmin } from "./js/api.js";
    if (!requireAuth("./login.html")) {}
    if (!requireAdmin("./select.html")) {}

    const notice = document.getElementById("notice");
    function setNotice(type, msg){
      notice.style.display = msg ? "block" : "none";
      notice.className = "notice " + (type || "");
      notice.textContent = msg || "";
    }

    function escapeHtml(s){
      return String(s).replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      }[m]));
    }
    function escapeAttr(s){ return escapeHtml(s).replace(/"/g,"&quot;"); }
    function typeNice(t){ return t === "phone" ? "S·ªë ƒëi·ªán tho·∫°i" : (t === "link" ? "ƒê∆∞·ªùng link" : (t||"")); }
    function statusNice(s){
      if (s === "pending") return "Ch·ªù duy·ªát";
      if (s === "safe") return "ƒê√£ duy·ªát (an to√†n)";
      if (s === "scam") return "ƒê√£ duy·ªát (l·ª´a ƒë·∫£o)";
      return "Ch·ªù duy·ªát";
    }

    // Tabs
    function showTab(name){
      ["users","reports","list","stats"].forEach(t=>{
        document.getElementById("tab-"+t).style.display = (t===name) ? "block" : "none";
      });
      setNotice("", "");
    }
    document.querySelectorAll("[data-tab]").forEach(btn=>{
      btn.addEventListener("click", ()=> showTab(btn.getAttribute("data-tab")));
    });

    document.getElementById("btnReloadAll").addEventListener("click", async ()=>{
      const visible = ["users","reports","list","stats"].find(t => document.getElementById("tab-"+t).style.display !== "none") || "users";
      if (visible === "users") await loadUsers();
      if (visible === "reports") await loadReports();
      if (visible === "list") await loadList();
      if (visible === "stats") await loadStats();
    });

    // ===== LIST FULL GRID TOGGLE =====
    const listGrid = document.getElementById("listGrid");
    const panelAdd = document.getElementById("panelAdd");
    const panelFilter = document.getElementById("panelFilter");
    const btnShowAdd = document.getElementById("btnShowAdd");
    const btnShowFilter = document.getElementById("btnShowFilter");
    const btnShowBoth = document.getElementById("btnShowBoth");

    function setListMode(mode){
      // mode: add | filter | both
      if (mode === "both"){
        listGrid.classList.add("two");
        panelAdd.style.display = "block";
        panelFilter.style.display = "block";
        return;
      }
      listGrid.classList.remove("two");
      panelAdd.style.display = (mode === "add") ? "block" : "none";
      panelFilter.style.display = (mode === "filter") ? "block" : "none";
    }

    btnShowAdd.addEventListener("click", ()=> setListMode("add"));
    btnShowFilter.addEventListener("click", ()=> setListMode("filter"));
    btnShowBoth.addEventListener("click", ()=> setListMode("both"));

    // m·∫∑c ƒë·ªãnh: m·ªü l·ªçc (full)
    setListMode("filter");

    // ===== USERS =====
    const usersTbody = document.getElementById("usersTbody");
    async function loadUsers(){
      try{
        setNotice("", "ƒêang t·∫£i ng∆∞·ªùi d√πng...");
        const rows = await apiFetch("/api/admin/users", { auth:true });

        usersTbody.innerHTML = (rows||[]).length ? (rows||[]).map(u => `
          <tr>
            <td>${u.id}</td>
            <td>${escapeHtml(u.username||"")}</td>
            <td><input class="u-full" data-id="${u.id}" value="${escapeAttr(u.fullname||"")}" /></td>
            <td><input class="u-email" data-id="${u.id}" value="${escapeAttr(u.email||"")}" /></td>
            <td><input class="u-phone" data-id="${u.id}" value="${escapeAttr(u.phone||"")}" /></td>
            <td>
              <select class="u-role" data-id="${u.id}">
                <option value="user" ${u.role==="user"?"selected":""}>Ng∆∞·ªùi d√πng</option>
                <option value="admin" ${u.role==="admin"?"selected":""}>Qu·∫£n tr·ªã</option>
              </select>
            </td>
            <td><button class="btn secondary" type="button" data-save="${u.id}"><span class="material-symbols-outlined">save</span>L∆∞u</button></td>
          </tr>
        `).join("") : '<tr><td colspan="7" style="color:var(--muted);">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>';

        usersTbody.querySelectorAll("input,select").forEach(el=>{
          el.style.width="100%";
          el.style.padding="10px 10px";
          el.style.borderRadius="10px";
          el.style.background="rgba(255,255,255,.06)";
          el.style.border="1px solid rgba(255,255,255,.14)";
          el.style.color="inherit";
          el.style.outline="none";
        });

        usersTbody.querySelectorAll("[data-save]").forEach(btn=>{
          btn.addEventListener("click", ()=> saveUser(Number(btn.getAttribute("data-save"))));
        });

        setNotice("ok", "ƒê√£ t·∫£i xong.");
      }catch(e){
        setNotice("err", e.message || "Kh√¥ng t·∫£i ƒë∆∞·ª£c.");
      }
    }
    async function saveUser(id){
      try{
        const fullname = document.querySelector(`.u-full[data-id="${id}"]`)?.value?.trim() || "";
        const email = document.querySelector(`.u-email[data-id="${id}"]`)?.value?.trim() || "";
        const phone = document.querySelector(`.u-phone[data-id="${id}"]`)?.value?.trim() || "";
        const role = document.querySelector(`.u-role[data-id="${id}"]`)?.value || "user";

        setNotice("", "ƒêang l∆∞u...");
        const data = await apiFetch("/api/admin/user/update", { method:"POST", auth:true, body:{ id, fullname, email, phone, role } });
        setNotice("ok", data.message || "ƒê√£ l∆∞u.");
      }catch(e){
        setNotice("err", e.message || "L∆∞u kh√¥ng th√†nh c√¥ng.");
      }
    }
    document.getElementById("reloadUsers").addEventListener("click", loadUsers);

    // ===== REPORTS =====
    const reportsTbody = document.getElementById("reportsTbody");
    async function loadReports(){
      try{
        setNotice("", "ƒêang t·∫£i b√°o c√°o...");
        const rows = await apiFetch("/api/admin/reports", { auth:true });

        reportsTbody.innerHTML = (rows||[]).length ? (rows||[]).map(r=>`
          <tr>
            <td>${r.id}</td>
            <td>${typeNice(r.type)}</td>
            <td>${escapeHtml(r.value||"")}</td>
            <td>${escapeHtml(r.description||"")}</td>
            <td><span class="badge">${statusNice(r.status||"pending")}</span></td>
            <td>
              <select class="rep-status" data-id="${r.id}">
                <option value="pending">Ch·ªù duy·ªát</option>
                <option value="safe">ƒê√£ duy·ªát (an to√†n)</option>
                <option value="scam">ƒê√£ duy·ªát (l·ª´a ƒë·∫£o)</option>
              </select>
              <button class="btn secondary" type="button" data-up="${r.id}"><span class="material-symbols-outlined">done</span>OK</button>
            </td>
          </tr>
        `).join("") : '<tr><td colspan="6" style="color:var(--muted);">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>';

        reportsTbody.querySelectorAll("select").forEach(el=>{
          el.style.width="100%";
          el.style.padding="10px 10px";
          el.style.borderRadius="10px";
          el.style.background="rgba(255,255,255,.06)";
          el.style.border="1px solid rgba(255,255,255,.14)";
          el.style.color="inherit";
          el.style.outline="none";
        });

        (rows||[]).forEach(r=>{
          const sel = document.querySelector(`.rep-status[data-id="${r.id}"]`);
          if (sel) sel.value = (r.status || "pending");
        });

        reportsTbody.querySelectorAll("[data-up]").forEach(btn=>{
          btn.addEventListener("click", ()=> updateReport(Number(btn.getAttribute("data-up"))));
        });

        setNotice("ok", "ƒê√£ t·∫£i xong.");
      }catch(e){
        setNotice("err", e.message || "Kh√¥ng t·∫£i ƒë∆∞·ª£c.");
      }
    }
    async function updateReport(id){
      try{
        const status = document.querySelector(`.rep-status[data-id="${id}"]`)?.value || "pending";
        setNotice("", "ƒêang c·∫≠p nh·∫≠t...");
        await apiFetch("/api/admin/update", { method:"POST", auth:true, body:{ id, status } });
        setNotice("ok", "ƒê√£ c·∫≠p nh·∫≠t.");
        await loadReports();
        await loadList();
        await loadStats();
      }catch(e){
        setNotice("err", e.message || "C·∫≠p nh·∫≠t kh√¥ng th√†nh c√¥ng.");
      }
    }
    document.getElementById("reloadReports").addEventListener("click", loadReports);

    // ===== LIST =====
    let page = 1;
    const pageSize = 10;
    const listTbody = document.getElementById("listTbody");
    const pageInfo = document.getElementById("pageInfo");

    function buildListQuery(){
      const type = document.getElementById("filterType").value;
      const sort = document.getElementById("sort").value;
      const q = document.getElementById("q").value.trim();
      const status = document.getElementById("filterStatus").value;

      const params = new URLSearchParams({
        page: String(page),
        pageSize: String(pageSize),
        type, sort, q, status
      });
      return "/api/admin/scam/list?" + params.toString();
    }

    async function loadList(){
      try{
        setNotice("", "ƒêang t·∫£i danh s√°ch...");
        const data = await apiFetch(buildListQuery(), { auth:true });

        const items = data.items || [];
        listTbody.innerHTML = items.length ? items.map(it=>`
          <tr>
            <td>${it.id}</td>
            <td>${typeNice(it.type)}</td>
            <td>${escapeHtml(it.value||"")}</td>
            <td>${escapeHtml(it.description||"")}</td>
            <td><span class="badge">${statusNice(it.status||"pending")}</span></td>
            <td>${escapeHtml(it.created_at||"")}</td>
            <td><button class="btn danger" type="button" data-del="${it.id}"><span class="material-symbols-outlined">delete</span>X√≥a</button></td>
          </tr>
        `).join("") : '<tr><td colspan="7" style="color:var(--muted);">Ch∆∞a c√≥ d·ªØ li·ªáu</td></tr>';

        listTbody.querySelectorAll("[data-del]").forEach(btn=>{
          btn.addEventListener("click", ()=> delItem(Number(btn.getAttribute("data-del"))));
        });

        pageInfo.textContent = `Trang ${data.page} / ${data.totalPages} ‚Ä¢ T·ªïng: ${data.total}`;
        setNotice("ok", "ƒê√£ t·∫£i xong.");
      }catch(e){
        setNotice("err", e.message || "Kh√¥ng t·∫£i ƒë∆∞·ª£c.");
      }
    }

    async function delItem(id){
      try{
        setNotice("", "ƒêang x√≥a...");
        await apiFetch(`/api/admin/scam/${id}`, { method:"DELETE", auth:true });
        setNotice("ok", "ƒê√£ x√≥a.");
        await loadList();
        await loadStats();
      }catch(e){
        setNotice("err", e.message || "X√≥a kh√¥ng th√†nh c√¥ng.");
      }
    }

    document.getElementById("reloadList").addEventListener("click", ()=>{ page=1; loadList(); });
    document.getElementById("searchBtn").addEventListener("click", ()=>{ page=1; loadList(); });
    document.getElementById("prevPage").addEventListener("click", ()=>{ page=Math.max(1,page-1); loadList(); });
    document.getElementById("nextPage").addEventListener("click", ()=>{ page=page+1; loadList(); });

    // ===== ADD =====
    const addNotice = document.getElementById("addNotice");
    function setAdd(type, msg){
      addNotice.style.display = msg ? "block" : "none";
      addNotice.className = "notice " + (type || "");
      addNotice.textContent = msg || "";
    }

    document.getElementById("addForm").addEventListener("submit", async (e)=>{
      e.preventDefault();
      const btnAdd = document.getElementById("btnAdd");
      btnAdd.disabled = true;

      try{
        const type = document.getElementById("addType").value;
        const value = document.getElementById("addValue").value.trim();
        const description = document.getElementById("addDesc").value.trim();

        const data = await apiFetch("/api/admin/scam/add", { method:"POST", auth:true, body:{ type, value, description } });
        setAdd("ok", data.message || "ƒê√£ th√™m.");

        e.target.reset();
        page = 1;
        await loadList();
        await loadStats();
      }catch(err){
        setAdd("err", err.message || "Th√™m kh√¥ng th√†nh c√¥ng.");
      }finally{
        btnAdd.disabled = false;
      }
    });

    // ===== STATS =====
    async function loadStats(){
      try{
        setNotice("", "ƒêang t·∫£i th·ªëng k√™...");
        const counts = await apiFetch("/api/admin/type-counts", { auth:true });
        document.getElementById("cPhone").textContent = counts.phone ?? 0;
        document.getElementById("cLink").textContent = counts.link ?? 0;
        setNotice("ok", "ƒê√£ t·∫£i xong.");
      }catch(e){
        setNotice("err", e.message || "Kh√¥ng t·∫£i ƒë∆∞·ª£c.");
      }
    }
    document.getElementById("reloadStats").addEventListener("click", loadStats);

    // Init
    showTab("users");
    loadUsers();
  </script>
</body>
</html>